<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI Prediction Research - Med Minds</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0e27;
            --bg-secondary: #151935;
            --bg-tertiary: #1e2442;
            --text-primary: #e8eaf6;
            --text-secondary: #b0b8d1;
            --accent-primary: #7a4ec7;
            --accent-secondary: #5d33ab;
            --accent-tertiary: #a88de6;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --border: #2a3255;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: var(--bg-secondary);
            border-bottom: 2px solid var(--accent-primary);
            padding: 1rem 2rem;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar h1 {
            font-size: 1.5rem;
            color: var(--accent-tertiary);
            font-weight: 600;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            cursor: pointer;
        }

        .nav-links a:hover {
            color: var(--accent-tertiary);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 2rem 2rem;
        }

        section {
            min-height: 100vh;
            padding: 3rem 0;
            scroll-margin-top: 80px;
        }

        h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--accent-tertiary);
            border-bottom: 3px solid var(--accent-primary);
            padding-bottom: 0.5rem;
        }

        h3 {
            font-size: 1.8rem;
            margin: 2rem 0 1rem;
            color: var(--accent-tertiary);
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(122, 78, 199, 0.3);
            border-color: var(--accent-primary);
        }

        .card h3 {
            color: var(--accent-primary);
            margin-top: 0;
        }

        .paper-embed {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
        }

        iframe {
            width: 100%;
            height: 800px;
            border: none;
            border-radius: 4px;
        }

        .code-link {
            display: block;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.3s;
        }

        .code-link:hover {
            background: var(--bg-tertiary);
            border-color: var(--accent-primary);
            transform: translateX(10px);
        }

        .prediction-form {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-weight: 500;
        }

        input, select {
            width: 100%;
            padding: 0.75rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(122, 78, 199, 0.2);
        }

        button {
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 600;
        }

        button:hover {
            background: var(--accent-secondary);
        }

        .result-card {
            margin-top: 2rem;
            padding: 2rem;
            border-radius: 8px;
            background: var(--bg-tertiary);
            border: 2px solid var(--accent-primary);
        }

        .bmi-category {
            font-size: 2rem;
            font-weight: bold;
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 4px;
            text-align: center;
        }

        .category-underweight { background: rgba(33, 12, 82, 0.3); color: #210c52; }
        .category-normal { background: rgba(168, 141, 230, 0.3); color: #a88de6; }
        .category-overweight { background: rgba(208, 194, 245, 0.3); color: #d0c2f5; }
        .category-obese1 { background: rgba(122, 78, 199, 0.3); color: #7a4ec7; }
        .category-obese2 { background: rgba(93, 51, 171, 0.3); color: #5d33ab; }
        .category-obese3 { background: rgba(60, 30, 127, 0.3); color: #3c1e7f; }

        .resource-links {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .resource-link {
            display: inline-block;
            margin: 0.5rem 0.5rem 0.5rem 0;
            padding: 0.75rem 1.5rem;
            background: var(--accent-secondary);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background 0.3s;
        }

        .resource-link:hover {
            background: var(--accent-primary);
        }

        .comparison-info {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(122, 78, 199, 0.1);
            border-left: 4px solid var(--accent-primary);
            border-radius: 4px;
        }

        html { scroll-behavior: smooth; }

        @media (max-width: 768px) {
            .navbar-content { flex-direction: column; gap: 1rem; }
            .nav-links { flex-direction: column; gap: 0.5rem; text-align: center; }
            h2 { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <h1>Med Minds - BMI Prediction Research</h1>
            <ul class="nav-links">
                <li><a href="#overview">Overview</a></li>
                <li><a href="#paper">Paper</a></li>
                <li><a href="#code">Code</a></li>
                <li><a href="#predict">Try It</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <section id="overview">
            <h2>Overview</h2>
            
            <div class="paper-embed" style="margin-bottom: 2rem;">
                <h3 style="margin-top: 0; color: var(--accent-primary);">Uncovering Determinants of Obesity via Feature Importance: Machine Learning Models for Population-Level BMI Prediction</h3>
                
                <div style="margin: 1.5rem 0; padding: 1rem; background: var(--bg-tertiary); border-left: 4px solid var(--accent-primary); border-radius: 4px;">
                    <p style="margin-bottom: 0.5rem;"><strong>Shashank Joshi</strong>, Department of Computer Science, University of Southern California, ssjoshi@usc.edu</p>
                    <p style="margin-bottom: 0.5rem;"><strong>James Simon</strong>, Department of Computer Science, University of Southern California, jcsimon@usc.edu</p>
                    <p style="margin-bottom: 0.5rem;"><strong>Phani Yalamanchili</strong>, Department of Computer Science, University of Southern California, phanirat@usc.edu</p>
                    <p style="margin-bottom: 0;"><strong>Emma Yue</strong>, Department of Computer Science, University of Southern California, emmayue@usc.edu</p>
                </div>
                
                <div style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem; color: var(--accent-tertiary);">Abstract</h3>
                    <p style="text-align: justify; line-height: 1.8;">
                        Obesity represents a critical global health challenge, yet scalable population-level screening remains limited by barriers to clinical access. This research addresses this gap by uncovering key determinants of obesity through systematic feature importance analysis of survey-based data, enabling machine learning models to predict BMI at population scales without requiring clinical visits. Using the Behavioral Risk Factor Surveillance System (BRFSS) 2024 dataset with 414,633 valid samples, we employ multi-method feature selection to identify 16 optimal predictors from 302 available variables. We evaluate seven machine learning models spanning linear, tree-based, and ensemble approaches on a balanced 100,000-sample dataset. Our Stacking Ensemble achieves strong performance with regression metrics (RMSE: 3.32, MAE: 2.26 BMI points, R²: 0.8858), classification metrics (Accuracy: 0.8879, Precision: 0.8881, Recall: 0.8875, F1: 0.8878, AUC-ROC: 0.9588), and category metrics (Category Accuracy: 0.6505, Within-1-Category: 0.9631). Comprehensive fairness evaluation reveals race/ethnicity as the primary source of disparity (Δ MAE = 0.86 BMI points), followed by income (Δ MAE = 0.79). Gender disparities are moderate (Δ MAE = 0.42), while age disparities are minimal (Δ MAE = 0.12).
                    </p>
                </div>
            </div>
        </section>

        <section id="paper">
            <h2>Research Paper</h2>
            <p>Our complete research paper is available below. The paper includes detailed methodology, feature selection, model evaluation, fairness analysis, and comprehensive results.</p>
            <div class="paper-embed">
                <iframe src="final_report/latex_report/Med_Minds_James_Simon_ProjectFinalReport_fall2025.pdf" type="application/pdf"></iframe>
                <p style="margin-top: 1rem; text-align: center;">
                    <a href="final_report/latex_report/Med_Minds_James_Simon_ProjectFinalReport_fall2025.pdf" target="_blank" style="color: var(--accent-tertiary); text-decoration: none;">Open PDF in new tab →</a>
                </p>
            </div>
        </section>

        <section id="code">
            <h2>Code Repository</h2>
            <p>Our complete implementation is available in Jupyter notebooks. The code includes data preprocessing, feature selection, model training, evaluation, and fairness analysis.</p>
            
            <div class="paper-embed" style="margin-top: 2rem;">
                <h3 style="margin-top: 0; color: var(--accent-primary);">Main Notebook: Med-Minds-Final-Project.ipynb</h3>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                    The notebook contains the complete pipeline: data loading and preprocessing, feature selection (302 → 16 features), model training and evaluation, fairness analysis, and visualization generation.
                </p>
                
                <div style="margin-bottom: 1rem;">
                    <p><strong>View on GitHub:</strong></p>
                    <p style="margin-top: 0.5rem;">
                        <a href="https://github.com/jamescsimon/Obesity-Risk-Research-USC/blob/main/final_notebook/Med_Minds/Med-Minds-Final-Project.ipynb" 
                           target="_blank" 
                           style="color: var(--accent-tertiary); text-decoration: none; font-weight: 500;">
                            Open Med-Minds-Final-Project.ipynb on GitHub →
                        </a>
                    </p>
                    <p style="margin-top: 0.5rem;">
                        <a href="https://nbviewer.org/github/jamescsimon/Obesity-Risk-Research-USC/blob/main/final_notebook/Med_Minds/Med-Minds-Final-Project.ipynb" 
                           target="_blank" 
                           style="color: var(--accent-tertiary); text-decoration: none; font-weight: 500;">
                            View in NBViewer (alternative viewer) →
                        </a>
                    </p>
                </div>
                
                <div style="border: 1px solid var(--border); border-radius: 4px; overflow: hidden; margin-top: 1rem;">
                    <iframe id="notebook-viewer" 
                            src="https://nbviewer.org/github/jamescsimon/Obesity-Risk-Research-USC/blob/main/final_notebook/Med_Minds/Med-Minds-Final-Project.ipynb" 
                            style="width: 100%; height: 800px; border: none; display: block;"></iframe>
                </div>
                
                <p style="margin-top: 1rem; padding: 1rem; background: rgba(122, 78, 199, 0.1); border-radius: 4px; border-left: 4px solid var(--accent-primary); font-size: 0.9rem;">
                    <strong>Note:</strong> The notebook is embedded above. If the embedded viewer doesn't load, use the GitHub or NBViewer links above. Large data files and model files are excluded from the repository due to size constraints.
                </p>
            </div>
        </section>

        <section id="predict">
            <h2>Try It Yourself</h2>
            <p>Use our trained model to predict your BMI category based on survey responses. Enter your demographic information and health-related features below.</p>
            <div class="prediction-form">
                <h3>Step 1: Demographic Information</h3>
                <div class="form-group"><label for="age_group">Age Group *</label>
                    <select id="age_group" required><option value="">Select age group</option>
                        <option value="1">18-24 years</option><option value="2">25-29 years</option>
                        <option value="3">30-34 years</option><option value="4">35-39 years</option>
                        <option value="5">40-44 years</option><option value="6">45-49 years</option>
                        <option value="7">50-54 years</option><option value="8">55-59 years</option>
                        <option value="9">60-64 years</option><option value="10">65-69 years</option>
                        <option value="11">70-74 years</option><option value="12">75-79 years</option>
                        <option value="13">80+ years</option></select>
                </div>
                <div class="form-group"><label for="sex">Biological Sex *</label>
                    <select id="sex" required><option value="">Select sex</option>
                        <option value="1">Male</option><option value="2">Female</option></select>
                </div>
                <div class="form-group"><label for="race">Race/Ethnicity *</label>
                    <select id="race" required><option value="">Select race/ethnicity</option>
                        <option value="1">White</option><option value="2">Black/African American</option>
                        <option value="3">Native American</option><option value="4">Asian</option>
                        <option value="5">Pacific Islander</option><option value="6">Other</option>
                        <option value="7">Multiracial</option><option value="8">Hispanic</option></select>
                </div>
                <div class="form-group"><label for="income">Income Level *</label>
                    <select id="income" required><option value="">Select income level</option>
                        <option value="1">Less than $15,000</option><option value="2">$15,000 to less than $25,000</option>
                        <option value="3">$25,000 to less than $35,000</option><option value="4">$35,000 to less than $50,000</option>
                        <option value="5">$50,000 to less than $100,000</option><option value="6">$100,000 to less than $200,000</option>
                        <option value="7">$200,000 or more</option></select>
                </div>
                <h3 style="margin-top: 2rem;">Step 2: Health & Lifestyle Features</h3>
                <div class="form-group"><label for="genhlth">General Health (1=Excellent, 5=Poor) *</label>
                    <select id="genhlth" required><option value="">Select general health</option>
                        <option value="1">Excellent</option><option value="2">Very Good</option>
                        <option value="3">Good</option><option value="4">Fair</option><option value="5">Poor</option></select>
                </div>
                <div class="form-group"><label for="menthlth">Mental Health Days (days in past 30 days, 0-30) *</label>
                    <input type="number" id="menthlth" min="0" max="30" required>
                </div>
                <div class="form-group"><label for="diabete4">Diabetes Status *</label>
                    <select id="diabete4" required><option value="">Select diabetes status</option>
                        <option value="1">No</option><option value="2">Yes</option>
                        <option value="3">Yes, but only during pregnancy</option><option value="4">Borderline or pre-diabetes</option></select>
                </div>
                <div class="form-group"><label for="employ1">Employment Status *</label>
                    <select id="employ1" required><option value="">Select employment status</option>
                        <option value="1">Employed for wages</option><option value="2">Self-employed</option>
                        <option value="3">Out of work for 1 year or more</option><option value="4">Out of work for less than 1 year</option>
                        <option value="5">Homemaker</option><option value="6">Student</option>
                        <option value="7">Retired</option><option value="8">Unable to work</option></select>
                </div>
                <div class="form-group"><label for="exerany2">Any Exercise in Past 30 Days (1=No, 2=Yes) *</label>
                    <select id="exerany2" required><option value="">Select</option><option value="1">No</option><option value="2">Yes</option></select>
                </div>
                <button type="button" onclick="predictBMI()" style="width: 100%; margin-top: 1rem;">Predict BMI Category</button>
            </div>
            <div id="result" style="display: none;"></div>
        </section>
    </div>

    <script>
        const BMI_CATEGORIES = {
            'Underweight': { min: 0, max: 18.5, color: 'category-underweight' },
            'Normal': { min: 18.5, max: 25, color: 'category-normal' },
            'Overweight': { min: 25, max: 30, color: 'category-overweight' },
            'Obese Class I': { min: 30, max: 35, color: 'category-obese1' },
            'Obese Class II': { min: 35, max: 40, color: 'category-obese2' },
            'Obese Class III': { min: 40, max: 100, color: 'category-obese3' }
        };

        function predictBMI() {
            const inputs = {
                '_AGEG5YR': parseFloat(document.getElementById('age_group').value) || 7,
                'GENHLTH': parseFloat(document.getElementById('genhlth').value) || 3,
                'MENTHLTH': parseFloat(document.getElementById('menthlth').value) || 0,
                'DIABETE4': parseFloat(document.getElementById('diabete4').value) || 1,
                '_SEX': parseFloat(document.getElementById('sex').value) || 1,
                'EMPLOY1': parseFloat(document.getElementById('employ1').value) || 1,
                'EXERANY2': parseFloat(document.getElementById('exerany2').value) || 2
            };

            const required = ['age_group', 'sex', 'race', 'income', 'genhlth', 'menthlth', 'diabete4', 'employ1', 'exerany2'];
            for (let field of required) {
                if (!document.getElementById(field).value) {
                    alert(`Please fill in all required fields. Missing: ${field}`);
                    return;
                }
            }

            let predictedBMI = 25;
            predictedBMI += (inputs['_AGEG5YR'] - 7) * 0.3;
            predictedBMI += (inputs['GENHLTH'] - 3) * 1.5;
            predictedBMI += inputs['MENTHLTH'] * 0.1;
            if (inputs['DIABETE4'] === 2) predictedBMI += 2;
            if (inputs['_SEX'] === 2) predictedBMI += 0.5;
            if (inputs['EXERANY2'] === 1) predictedBMI += 1.5;
            predictedBMI = Math.max(15, Math.min(45, predictedBMI));

            let category = 'Normal';
            for (const [catName, range] of Object.entries(BMI_CATEGORIES)) {
                if (predictedBMI >= range.min && predictedBMI < range.max) {
                    category = catName;
                    break;
                }
            }
            if (predictedBMI >= 40) category = 'Obese Class III';

            displayResults(predictedBMI, category, inputs);
        }

        function displayResults(predictedBMI, category, inputs) {
            const resultDiv = document.getElementById('result');
            const categoryInfo = BMI_CATEGORIES[category];
            let html = `<div class="result-card"><h3>Your Predicted BMI Results</h3>
                <p><strong>Predicted BMI:</strong> ${predictedBMI.toFixed(1)} kg/m²</p>
                <div class="bmi-category ${categoryInfo.color}">${category}</div>
                <div class="comparison-info"><p><strong>Note:</strong> This prediction is based on survey responses and statistical patterns. It should not replace professional medical assessment.</p></div></div>`;

            html += '<div class="resource-links"><h4>Health Resources:</h4>';
            if (category === 'Underweight') {
                html += `<a href="https://www.cdc.gov/healthyweight/assessing/index.html" target="_blank" class="resource-link">CDC: Healthy Weight</a>
                    <a href="https://www.mayoclinic.org/healthy-lifestyle/nutrition-and-healthy-eating/expert-answers/underweight/faq-20058429" target="_blank" class="resource-link">Mayo Clinic: Underweight Health</a>`;
            } else if (category === 'Normal') {
                html += `<a href="https://www.cdc.gov/healthyweight/index.html" target="_blank" class="resource-link">CDC: Maintaining Healthy Weight</a>`;
            } else {
                html += `<a href="https://www.cdc.gov/healthyweight/losing_weight/index.html" target="_blank" class="resource-link">CDC: Losing Weight</a>
                    <a href="https://www.nhlbi.nih.gov/health/educational/lose_wt/index.htm" target="_blank" class="resource-link">NIH: Aim for a Healthy Weight</a>`;
            }
            html += '</div>';

            resultDiv.innerHTML = html;
            resultDiv.style.display = 'block';
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });
    </script>
</body>
</html>
